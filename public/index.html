<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Flora AI - Gemini Style</title>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
        /* --- 1. VARIABEL & RESET --- */
        :root {
            --bg-body: #131314;       /* Background Utama Gemini Dark */
            --bg-sidebar: #1E1F20;    /* Sidebar */
            --bg-input: #1E1F20;      /* Input Bar */
            --bg-user: #282A2C;       /* Bubble User */
            --bg-hover: #333537;
            --text-main: #E3E3E3;
            --text-sub: #A4A4A4;
            --accent: #4AA9FF;        /* Biru Gemini */
            --accent-grad: linear-gradient(90deg, #4AA9FF, #A78BFA);
        }

        * { box-sizing: border-box; outline: none; }
        body {
            margin: 0; padding: 0;
            background-color: var(--bg-body);
            color: var(--text-main);
            font-family: 'Outfit', sans-serif;
            height: 100vh; display: flex; overflow: hidden;
        }

        /* --- 2. AUTH SCREEN (LOGIN/REGISTER) --- */
        #auth-overlay {
            position: fixed; inset: 0; z-index: 9999;
            background: var(--bg-body);
            display: flex; align-items: center; justify-content: center;
            transition: opacity 0.5s ease;
        }
        .auth-box {
            width: 100%; max-width: 400px; padding: 40px;
            background: var(--bg-sidebar); border-radius: 24px;
            text-align: center; border: 1px solid #333;
        }
        .auth-title { font-size: 28px; font-weight: 500; margin-bottom: 10px; }
        .auth-sub { color: var(--text-sub); font-size: 14px; margin-bottom: 30px; }
        
        .inp-group { text-align: left; margin-bottom: 15px; }
        .inp-field {
            width: 100%; padding: 16px; background: #2C2C2E;
            border: 1px solid #3C3C3E; border-radius: 12px;
            color: white; font-size: 16px; transition: 0.3s;
        }
        .inp-field:focus { border-color: var(--accent); }
        
        .btn-main {
            width: 100%; padding: 16px; border-radius: 30px;
            background: white; color: black; font-weight: 600; font-size: 16px;
            border: none; cursor: pointer; margin-top: 10px;
        }
        .toggle-link { margin-top: 20px; font-size: 13px; color: var(--text-sub); }
        .toggle-link span { color: var(--accent); cursor: pointer; font-weight: 600; }

        /* --- 3. LAYOUT UTAMA --- */
        #app-layout { display: none; width: 100%; height: 100%; opacity: 0; transition: opacity 0.8s; }

        /* SIDEBAR */
        .sidebar {
            width: 280px; background: var(--bg-sidebar);
            display: flex; flex-direction: column; padding: 20px;
            border-right: 1px solid #333;
            transition: transform 0.3s;
        }
        .new-chat {
            background: #28292A; padding: 12px 15px; border-radius: 20px;
            color: var(--text-sub); font-size: 14px; cursor: pointer;
            display: flex; align-items: center; gap: 10px; transition: 0.2s;
        }
        .new-chat:hover { background: var(--bg-hover); color: white; }
        
        .history-sec { flex: 1; overflow-y: auto; margin-top: 20px; }
        .hist-item { padding: 10px; border-radius: 18px; font-size: 14px; cursor: pointer; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
        .hist-item:hover { background: var(--bg-hover); }

        .user-mini {
            margin-top: auto; padding-top: 15px; border-top: 1px solid #333;
            display: flex; align-items: center; gap: 10px;
        }
        .avatar { width: 32px; height: 32px; background: orange; border-radius: 50%; display: flex; justify-content: center; align-items: center; font-weight: bold; color: #000; }

        /* MAIN CHAT AREA */
        .main-area { flex: 1; position: relative; display: flex; flex-direction: column; }
        
        /* HEADER MOBILE */
        .mob-header {
            display: none; padding: 15px; align-items: center; justify-content: space-between;
            background: var(--bg-body);
        }

        /* SCROLL AREA */
        #chat-window {
            flex: 1; overflow-y: auto; padding: 0 0 100px 0;
            display: flex; flex-direction: column; align-items: center;
        }

        /* --- 4. WELCOME SCREEN (TENGAH) --- */
        #welcome-screen {
            width: 100%; max-width: 800px; padding: 40px 20px;
            margin-top: 5vh; animation: fadeIn 0.8s ease;
        }
        .greet-1 {
            font-size: 56px; font-weight: 600; letter-spacing: -1px; margin-bottom: 5px;
            background: var(--accent-grad); -webkit-background-clip: text; -webkit-text-fill-color: transparent;
        }
        .greet-2 { font-size: 56px; font-weight: 600; color: #444746; margin-bottom: 40px; }
        
        .card-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap: 10px; }
        .suggestion-card {
            background: var(--bg-sidebar); padding: 15px; height: 120px;
            border-radius: 12px; cursor: pointer; display: flex; flex-direction: column; justify-content: space-between;
            transition: 0.2s;
        }
        .suggestion-card:hover { background: var(--bg-hover); }
        .s-icon { align-self: flex-end; width: 30px; height: 30px; background: #000; border-radius: 50%; display: flex; align-items: center; justify-content: center; }

        /* --- 5. CHAT BUBBLES (GEMINI STYLE) --- */
        #message-container { width: 100%; max-width: 800px; padding: 20px; display: none; }

        .row { display: flex; gap: 15px; margin-bottom: 30px; width: 100%; animation: slideUp 0.3s; }
        
        /* USER: Pake Bubble */
        .row.user { justify-content: flex-end; }
        .row.user .content {
            background: var(--bg-user); color: white;
            padding: 12px 20px; border-radius: 20px 20px 4px 20px;
            max-width: 80%; line-height: 1.6;
        }

        /* BOT: Tanpa Bubble (Langsung Teks) */
        .row.bot { align-items: flex-start; }
        .bot-icon {
            width: 30px; height: 30px; flex-shrink: 0; margin-top: 5px;
            background: url('https://www.gstatic.com/lamda/images/gemini_sparkle_v002_d4735304ff6292a690345.svg') no-repeat center/contain;
        }
        .row.bot .content {
            background: transparent; padding: 0; color: var(--text-main);
            font-size: 16px; line-height: 1.7; max-width: 90%;
        }

        /* --- 6. INPUT FLOATING --- */
        .input-wrapper {
            position: absolute; bottom: 0; left: 0; right: 0;
            background: linear-gradient(transparent, var(--bg-body) 40%);
            padding: 20px; display: flex; justify-content: center;
        }
        .input-bar {
            background: var(--bg-input); width: 100%; max-width: 800px;
            border-radius: 30px; padding: 8px 15px; display: flex; align-items: center; gap: 10px;
            border: 1px solid #333; transition: 0.3s;
        }
        .input-bar:focus-within { background: var(--bg-user); border-color: #555; }
        #chat-input { flex: 1; background: transparent; border: none; color: white; font-size: 16px; padding: 12px 0; }
        .act-btn { background: none; border: none; color: white; font-size: 18px; cursor: pointer; padding: 8px; border-radius: 50%; }
        .act-btn:hover { background: #3C4043; }

        /* Loader Typing */
        .dots span {
            display: inline-block; width: 6px; height: 6px; background: var(--text-sub);
            border-radius: 50%; margin: 0 2px; animation: bounce 1.4s infinite;
        }
        @keyframes bounce { 0%, 100% {transform: scale(0);} 50% {transform: scale(1);} }
        @keyframes fadeIn { from{opacity:0;} to{opacity:1;} }
        @keyframes slideUp { from{transform:translateY(20px); opacity:0;} to{transform:translateY(0); opacity:1;} }

        /* RESPONSIVE */
        @media (max-width: 768px) {
            .sidebar { display: none; }
            .mob-header { display: flex; }
            .greet-1, .greet-2 { font-size: 38px; }
            .card-grid { grid-template-columns: 1fr; }
        }
    </style>
</head>
<body>

    <div id="auth-overlay">
        <div class="auth-box">
            <h1 class="auth-title">ðŸŒ¸ Flora AI</h1>
            <p class="auth-sub" id="auth-desc">Masuk untuk melanjutkan</p>
            
            <div id="form-container">
                <div class="inp-group" id="name-group" style="display:none;">
                    <input type="text" id="r-name" class="inp-field" placeholder="Nama Lengkap">
                </div>
                <div class="inp-group">
                    <input type="text" id="u-email" class="inp-field" placeholder="Username / Email">
                </div>
                <div class="inp-group">
                    <input type="password" id="u-pass" class="inp-field" placeholder="Password">
                </div>
                <button class="btn-main" onclick="processAuth()" id="btn-action">Masuk</button>
            </div>

            <div class="toggle-link">
                <span id="toggle-text" onclick="switchMode()">Buat akun baru</span>
            </div>
        </div>
    </div>

    <div id="app-layout">
        
        <div class="sidebar">
            <div class="new-chat" onclick="resetChat()">
                <i class="fa-solid fa-plus"></i> Chat Baru
            </div>
            <div style="margin-top:20px; font-size:12px; font-weight:600; color:var(--text-sub);">Baru saja</div>
            <div class="history-sec" id="history-list">
                </div>
            <div class="user-mini">
                <div class="avatar" id="u-avatar">U</div>
                <div>
                    <div style="font-weight:600; font-size:14px;" id="u-name-display">User</div>
                    <div style="font-size:11px; color:gray;">Free Plan</div>
                </div>
            </div>
        </div>

        <div class="main-area">
            <div class="mob-header">
                <i class="fa-solid fa-bars" style="color:white;"></i>
                <span style="font-weight:600;">Flora AI</span>
                <div class="avatar" style="width:28px; height:28px; font-size:12px;">U</div>
            </div>

            <div id="chat-window">
                
                <div id="welcome-screen">
                    <div class="greet-1" id="greeting">Halo, User</div>
                    <div class="greet-2">Ada yang bisa dibantu?</div>
                    
                    <div class="card-grid">
                        <div class="suggestion-card" onclick="startChat('Buatkan rencana belajar Data Science')">
                            <div>Rencana belajar Data Science untuk pemula</div>
                            <div class="s-icon"><i class="fa-solid fa-graduation-cap" style="color:white; font-size:12px;"></i></div>
                        </div>
                        <div class="suggestion-card" onclick="startChat('Jelaskan teori relativitas')">
                            <div>Jelaskan teori relativitas dengan bahasa santai</div>
                            <div class="s-icon"><i class="fa-solid fa-atom" style="color:white; font-size:12px;"></i></div>
                        </div>
                        <div class="suggestion-card" onclick="startChat('Ide caption Instagram liburan')">
                            <div>Buatkan caption Instagram estetik untuk foto pantai</div>
                            <div class="s-icon"><i class="fa-regular fa-image" style="color:white; font-size:12px;"></i></div>
                        </div>
                        <div class="suggestion-card" onclick="startChat('Debug kode Python error')">
                            <div>Bantu saya memperbaiki kode Python ini</div>
                            <div class="s-icon"><i class="fa-brands fa-python" style="color:white; font-size:14px;"></i></div>
                        </div>
                    </div>
                </div>

                <div id="message-container"></div>

            </div>

            <div class="input-wrapper">
                <div class="input-bar">
                    <button class="act-btn"><i class="fa-regular fa-image"></i></button>
                    <button class="act-btn"><i class="fa-solid fa-microphone"></i></button>
                    <input type="text" id="chat-input" placeholder="Ketik perintah di sini..." autocomplete="off">
                    <button class="act-btn" style="color: var(--accent);" onclick="handleSend()"><i class="fa-solid fa-paper-plane"></i></button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // --- LOGIC AUTH ---
        let isRegister = false;
        
        function switchMode() {
            isRegister = !isRegister;
            const title = document.getElementById('auth-desc');
            const btn = document.getElementById('btn-action');
            const toggle = document.getElementById('toggle-text');
            const nameGroup = document.getElementById('name-group');

            if(isRegister) {
                title.innerText = "Buat akun baru untuk memulai";
                btn.innerText = "Daftar";
                toggle.innerText = "Sudah punya akun? Masuk";
                nameGroup.style.display = 'block';
            } else {
                title.innerText = "Masuk untuk melanjutkan";
                btn.innerText = "Masuk";
                toggle.innerText = "Buat akun baru";
                nameGroup.style.display = 'none';
            }
        }

        function processAuth() {
            const btn = document.getElementById('btn-action');
            btn.innerText = "Memproses...";
            
            setTimeout(() => {
                const overlay = document.getElementById('auth-overlay');
                const app = document.getElementById('app-layout');
                
                // Ambil Nama
                let name = "Traveller";
                if(isRegister) name = document.getElementById('r-name').value;
                if(!name) name = "Adam"; // Default

                // Update UI Nama
                document.getElementById('greeting').innerHTML = `<span style="background: linear-gradient(90deg, #4AA9FF, #A78BFA); -webkit-background-clip: text; -webkit-text-fill-color: transparent;">Halo, ${name}</span>`;
                document.getElementById('u-name-display').innerText = name;
                document.getElementById('u-avatar').innerText = name.charAt(0).toUpperCase();

                // Animasi Masuk
                overlay.style.opacity = '0';
                setTimeout(() => {
                    overlay.style.display = 'none';
                    app.style.display = 'flex';
                    setTimeout(() => app.style.opacity = '1', 100);
                }, 500);
            }, 1000);
        }

        // --- LOGIC CHAT (GEMINI ENGINE) ---
        const chatInput = document.getElementById('chat-input');
        const msgContainer = document.getElementById('message-container');
        const welcomeScreen = document.getElementById('welcome-screen');
        const scrollWindow = document.getElementById('chat-window');

        chatInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') handleSend();
        });

        function startChat(text) {
            chatInput.value = text;
            handleSend();
        }

        function resetChat() {
            msgContainer.innerHTML = "";
            msgContainer.style.display = "none";
            welcomeScreen.style.display = "block";
        }

        function handleSend() {
            const text = chatInput.value.trim();
            if(!text) return;

            // 1. UI Transition
            welcomeScreen.style.display = "none";
            msgContainer.style.display = "block";
            
            // 2. Add User Message (Bubble)
            appendMessage(text, 'user');
            chatInput.value = "";

            // 3. Bot Typing Indicator
            const loaderId = showLoader();

            // 4. Simulate Response Delay
            setTimeout(() => {
                removeLoader(loaderId);
                const reply = getAIResponse(text);
                typeWriterEffect(reply); // Efek ngetik
                addToHistory(text); // Masuk sidebar
            }, 1500);
        }

        function appendMessage(text, role) {
            const div = document.createElement('div');
            div.className = `row ${role}`;
            
            if(role === 'user') {
                div.innerHTML = `<div class="content">${text}</div>`;
            } else {
                // Bot Structure: Icon + Text
                div.innerHTML = `
                    <div class="bot-icon"></div>
                    <div class="content">${text}</div>
                `;
            }
            msgContainer.appendChild(div);
            scrollWindow.scrollTop = scrollWindow.scrollHeight;
        }

        function showLoader() {
            const id = 'loader-' + Date.now();
            const div = document.createElement('div');
            div.id = id;
            div.className = 'row bot';
            div.innerHTML = `
                <div class="bot-icon"></div>
                <div class="content">
                    <div class="dots"><span></span><span></span><span></span></div>
                </div>
            `;
            msgContainer.appendChild(div);
            scrollWindow.scrollTop = scrollWindow.scrollHeight;
            return id;
        }

        function removeLoader(id) {
            const el = document.getElementById(id);
            if(el) el.remove();
        }

        // Efek Mengetik Seperti Gemini
        function typeWriterEffect(text) {
            const div = document.createElement('div');
            div.className = 'row bot';
            
            const contentDiv = document.createElement('div');
            contentDiv.className = 'content';
            
            div.innerHTML = `<div class="bot-icon"></div>`;
            div.appendChild(contentDiv);
            msgContainer.appendChild(div);

            let i = 0;
            const speed = 10; // Kecepatan ngetik

            function type() {
                if (i < text.length) {
                    // Handle HTML tags basic
                    if(text.substring(i).startsWith('<br>')) {
                        contentDiv.innerHTML += '<br>';
                        i += 4;
                    } else if(text.substring(i).startsWith('<b>')) {
                        // Skip tag handling for simplicity in this demo
                        contentDiv.innerHTML += text.charAt(i);
                        i++;
                    } else {
                        contentDiv.innerHTML += text.charAt(i);
                        i++;
                    }
                    scrollWindow.scrollTop = scrollWindow.scrollHeight;
                    setTimeout(type, speed);
                }
            }
            type();
        }

        function addToHistory(title) {
            const list = document.getElementById('history-list');
            const item = document.createElement('div');
            item.className = 'hist-item';
            item.innerHTML = `<i class="fa-regular fa-message" style="margin-right:10px;"></i> ${title}`;
            list.prepend(item);
        }

        // Mock AI Brain
        function getAIResponse(input) {
            input = input.toLowerCase();
            if(input.includes("halo") || input.includes("hai")) return "Halo! Saya Flora. Ada yang bisa saya bantu untuk tugas atau proyek kamu hari ini?";
            if(input.includes("siapa kamu")) return "Saya Flora, model AI eksperimental yang didesain untuk membantu produktivitas, koding, dan penulisan kreatif.";
            if(input.includes("belajar") || input.includes("tips")) return "Belajar adalah proses yang seru. Untuk memulainya, cobalah metode <b>Pomodoro</b> (25 menit fokus, 5 menit istirahat). <br><br>Apa topik spesifik yang ingin kamu pelajari?";
            if(input.includes("python") || input.includes("koding")) return "Python adalah bahasa yang hebat. Ini contoh sederhana loop:<br><br><code>for i in range(5):<br>&nbsp;&nbsp;print(i)</code><br><br>Mau saya buatkan kode yang lebih kompleks?";
            return "Pertanyaan yang menarik. Berdasarkan basis data saya, hal itu bisa dilihat dari berbagai perspektif. Bisakah kamu memberikan detail lebih lanjut?";
        }
    </script>
</body>
    </html>
